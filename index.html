<!DOCTYPE html>
<html>
<head>
  <title>Timeline Selector</title>
</head>
<body>

<select id="timelineSelector" onchange="changeTimeline()">
</select>

<iframe id="timelineIframe" width="100%" height="650" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0"></iframe>

<script>
// Fetch CSV file and populate dropdown
fetch('links.csv')
  .then(response => response.text())
  .then(csv => {
    const rows = csv.split('\n');
    const selector = document.getElementById("timelineSelector");

    // Extract the first row from CSV
    const firstRow = rows[0].split(',');

    // Set the first option based on the first row data
    const firstOption = document.createElement("option");
    firstOption.text = firstRow[0].trim(); // Assuming the name is in the first column
    firstOption.value = firstRow[1].trim(); // Assuming the URL is in the second column
    selector.add(firstOption);

    // Populate the rest of the options
    for (let i = 1; i < rows.length; i++) {
      const [name, url] = rows[i].split(',');
      const option = document.createElement("option");
      option.text = name.trim();
      option.value = url.trim();
      selector.add(option);
    }
  });

function changeTimeline() {
  var selector = document.getElementById("timelineSelector");
  var selectedSourceCode = selector.options[selector.selectedIndex].value;
  var iframe = document.getElementById("timelineIframe");
  var newSrc = `https://cdn.knightlab.com/libs/timeline3/latest/embed/index.html?source=${selectedSourceCode}&font=Default&lang=en&initial_zoom=2&height=650`;
  iframe.src = newSrc;
}

// Initialize with the default timeline
changeTimeline();
</script>

</body>
</html>
